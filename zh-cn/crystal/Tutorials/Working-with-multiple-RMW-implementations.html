

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Working with multiple ROS 2 middleware implementations &mdash; ros2 documentation  文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/ros2-docs-l10n/Tutorials/Working-with-multiple-RMW-implementations.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=946197a6"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/translations.js?v=beaddf03"></script>
      <script src="../_static/tabs.js?v=3030b3cb"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="On the mixing of ament and catkin (catment)" href="catment.html" />
    <link rel="prev" title="Synchronous vs. asynchronous service clients" href="Sync-Vs-Async.html" />
 
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ros2 documentation
              <img src="../_static/crystal-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Linux-Development-Setup.html">Building ROS 2 on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Linux-Install-Binary.html">Installing ROS 2 on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Linux-Install-Debians.html">Installing ROS 2 via Debian Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/macOS-Development-Setup.html">Building ROS 2 on macOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/macOS-Install-Binary.html">Installing ROS 2 on macOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Windows-Development-Setup.html">Building ROS 2 on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Windows-Install-Binary.html">Installing ROS 2 on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Fedora-Development-Setup.html">Building ROS 2 on Fedora Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Latest-Development-Setup.html">Installing the latest ROS 2 development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Maintaining-a-Source-Checkout.html">Maintaining a source checkout of ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Prerelease-Testing.html">Pre-release Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/DDS-Implementations.html">Installing DDS implementations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Installing Connext security plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Install-Connext-University-Eval.html">Installing University or Evaluation versions of RTI Connext DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Working with Eclipse Cyclone DDS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../Tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Configuring-ROS2-Environment.html">Configuring your ROS 2 environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="Turtlesim/Introducing-Turtlesim.html">Introducing turtlesim and rqt</a></li>
<li class="toctree-l2"><a class="reference internal" href="Understanding-ROS2-Nodes.html">Understanding ROS 2 nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Topics/Understanding-ROS2-Topics.html">Understanding ROS 2 topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Services/Understanding-ROS2-Services.html">Understanding ROS 2 services</a></li>
<li class="toctree-l2"><a class="reference internal" href="Parameters/Understanding-ROS2-Parameters.html">Understanding ROS 2 parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="Understanding-ROS2-Actions.html">Understanding ROS 2 actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Rqt-Console/Using-Rqt-Console.html">Using rqt_console</a></li>
<li class="toctree-l2"><a class="reference internal" href="Launch-Files/Creating-Launch-Files.html">Creating a launch file</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ros2bag/Recording-And-Playing-Back-Data.html">Recording and playing back data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Workspace/Creating-A-Workspace.html">Creating a workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="Creating-Your-First-ROS2-Package.html">Creating your first ROS 2 package</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (C++)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing-A-Simple-Py-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (Python)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing-A-Simple-Cpp-Service-And-Client.html">Writing a simple service and client (C++)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing-A-Simple-Py-Service-And-Client.html">Writing a simple service and client (Python)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom-ROS2-Interfaces.html">Creating custom ROS 2 msg and srv files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Single-Package-Define-And-Use-Interface.html">Expanding on ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="Using-Parameters-In-A-Class-CPP.html">Using parameters in a class (C++)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Using-Parameters-In-A-Class-Python.html">Using parameters in a class (Python)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Actions/Creating-an-Action.html">Creating an action</a></li>
<li class="toctree-l2"><a class="reference internal" href="Actions/Writing-a-Cpp-Action-Server-Client.html">Writing an action server and client (C++)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Actions/Writing-a-Py-Action-Server-Client.html">Writing an action server and client (Python)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Developing-a-ROS-2-Package.html">Developing a ROS 2 package</a></li>
<li class="toctree-l2"><a class="reference internal" href="Colcon-Tutorial.html">Using colcon to build packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ament-CMake-Documentation.html">ament_cmake user documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Launch-system.html">Launching/monitoring multiple nodes with Launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="Node-arguments.html">Passing ROS arguments to nodes via the command-line</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introspection-with-command-line-tools.html">Introspection with command line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="RQt-Overview-Usage.html">Overview and usage of RQt</a><ul>
<li class="toctree-l3"><a class="reference internal" href="RQt-Source-Install.html">Building RQt from source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="RQt-Source-Install-MacOS.html">Building RQt from source on macOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="RQt-Source-Install-Windows10.html">Building RQt from source on Windows 10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Composition.html">Composing multiple nodes in a single process</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ros2bag/Overriding-QoS-Policies-For-Recording-And-Playback.html">Overriding QoS Policies For Recording And Playback</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sync-Vs-Async.html">Synchronous vs. asynchronous service clients</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Working with multiple ROS 2 middleware implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="catment.html">On the mixing of ament and catkin (catment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cross-compilation.html">Cross-compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Allocator-Template-Tutorial.html">Implement a custom memory allocator</a></li>
<li class="toctree-l2"><a class="reference internal" href="Releasing-a-ROS-2-package-with-bloom.html">Releasing a ROS 2 package with bloom</a></li>
<li class="toctree-l2"><a class="reference internal" href="RQt-Port-Plugin-Windows.html">Porting RQt plugins to Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="Run-2-nodes-in-a-single-docker-container.html">Running 2 nodes in a single docker container [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="Run-2-nodes-in-two-separate-docker-containers.html">Running 2 nodes in 2 separate docker containers [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="Deploying-ROS-2-on-IBM-Cloud.html">ROS2 on IBM Cloud Kubernetes [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="Launch-files-migration-guide.html">Migrating launch files from ROS 1 to ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Eclipse-Oxygen-with-ROS-2-and-rviz2.html">Eclipse Oxygen with ROS 2 and rviz2 [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="Building-ROS-2-on-Linux-with-Eclipse-Oxygen.html">Building ROS 2 on Linux with Eclipse Oxygen [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="Building-Realtime-rt_preempt-kernel-for-ROS-2.html">Building realtime Linux for ROS 2 [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="Parameters-YAML-files-migration-guide.html">Migrating YAML parameter files from ROS 1 to ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Quality-of-Service.html">Use quality-of-service settings to handle lossy networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Managed-Nodes.html">Management of nodes with managed lifecycles</a></li>
<li class="toctree-l2"><a class="reference internal" href="Intra-Process-Communication.html">Efficient intra-process communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="Rosbag-with-ROS1-Bridge.html">Recording and playback of topic data with rosbag using the ROS 1 bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="tf2.html">Using tf2 with ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="URDF/Using-URDF-with-Robot-State-Publisher.html">Using URDF with robot_state_publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="Real-Time-Programming.html">Real-time programming in ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="dummy-robot-demo.html">Trying the dummy robot demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Logging-and-logger-configuration.html">Logging and logger configuration demo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Concepts.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Different-Middleware-Vendors.html">About different ROS 2 DDS/RTPS vendors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Logging.html">About logging and logger configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Quality-of-Service-Settings.html">About Quality of Service settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Client-Libraries.html">About ROS 2 client libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-Interfaces.html">About ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Parameters.html">About parameters in ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Build-System.html">About the build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Internal-Interfaces.html">About internal ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Middleware-Implementations.html">About ROS 2 middleware implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Client-Interfaces.html">ROS 2 Client Interfaces (Client Libraries)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Troubleshooting/Installation-Troubleshooting.html">Installation troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Troubleshooting/DDS-tuning.html">DDS tuning information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/ROS-2-On-boarding-Guide.html">ROS 2 on-boarding guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Developer-Guide.html">ROS 2 developer guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Code-Style-Language-Versions.html">Code style and language versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Design-Guide.html">Design guide: common patterns in ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Quality-Guide.html">Quality guide: ensuring code quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Build-Cop-and-Build-Farmer-Guide.html">Build cop and build farmer guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Contributing/CI-Server-Setup.html">How to setup the Jenkins master</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Contributing/Set-up-a-new-Linux-CI-node.html">How to setup Linux Jenkins nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Contributing/Set-up-a-new-macOS-CI-node.html">How to setup a macOS Jenkins node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Contributing/Set-up-a-new-Windows-CI-node.html">How to setup a Windows Jenkins node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Migration-Guide.html">Migration guide from ROS 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Contributing/Migration-Guide-Python.html">Python migration guide from ROS 1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Examples-and-Tools-for-ROS1----ROS2-Migrations.html">Examples and tools for ROS1-to-ROS2 migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/Inter-Sphinx-Support.html">Using Sphinx for cross-referencing packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROSCon-Content.html">ROSCon Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Releases.html">Distributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Alpha-Overview.html">ROS 2 alpha releases (Aug 2015 - Oct 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Beta1-Overview.html">Beta 1 (codename 'Asphalt'; December 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Beta2-Overview.html">Beta 2 (codename 'r2b2'; July 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Beta3-Overview.html">Beta 3 (codename 'r2b3'; September 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Ardent-Apalone.html">ROS 2 Ardent Apalone (codename 'ardent'; December 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Bouncy-Bolson.html">ROS 2 Bouncy Bolson (codename 'bouncy'; June 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Crystal-Clemmys.html">ROS 2 Crystal Clemmys (codename 'crystal'; December 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Dashing-Diademata.html">ROS 2 Dashing Diademata (codename 'dashing'; May 31st, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Eloquent-Elusor.html">ROS 2 Eloquent Elusor (codename 'eloquent'; November 22nd, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Foxy-Fitzroy.html">ROS 2 Foxy Fitzroy (codename 'foxy'; June 5th, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Galactic-Geochelone.html">ROS 2 Galactic Geochelone (codename 'galactic'; May, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Howto.html">How to release</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Rolling-Ridley.html">ROS 2 Rolling Ridley (codename 'rolling'; June 2020)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Features.html">Features Status</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Feature-Ideas.html">Feature Ideas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Governance.html">Project Governance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Governance/ROS2-TSC-Charter.html">ROS 2 Technical Steering Committee Charter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Marketing.html">Marketing Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Related-Projects.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Related-Projects/Intel-ROS2-Projects.html">Intel ROS 2 Projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ros2 documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Tutorials.html">Tutorials</a></li>
      <li class="breadcrumb-item active">Working with multiple ROS 2 middleware implementations</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/rolling/source/Tutorials/Working-with-multiple-RMW-implementations.rst" class="fa fa-github"> 在 GitHub 上编辑</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             

  
  
  
  <p>
    <strong>
      
      <div class="admonition warning">
        <p class="admonition-title">警告</p>
        <p>
          You're reading the documentation for a version of ROS 2 that has reached its EOL (end-of-life), and is no longer officially supported. If you want up-to-date information, please have a look at <a href="../../../zh-cn/kilted/index.html">Kilted</a>.
        </p>
      </div>
      
    </strong>
  </p>


  <section id="working-with-multiple-ros-2-middleware-implementations">
<h1>Working with multiple ROS 2 middleware implementations<a class="headerlink" href="#working-with-multiple-ros-2-middleware-implementations" title="Link to this heading"></a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#prerequisites" id="id1">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#multiple-rmw-implementations" id="id2">Multiple RMW implementations</a></p></li>
<li><p><a class="reference internal" href="#default-rmw-implementation" id="id3">Default RMW implementation</a></p></li>
<li><p><a class="reference internal" href="#specifying-rmw-implementations" id="id4">Specifying RMW implementations</a></p></li>
<li><p><a class="reference internal" href="#adding-rmw-implementations-to-your-workspace" id="id5">Adding RMW implementations to your workspace</a></p></li>
<li><p><a class="reference internal" href="#troubleshooting" id="id6">Troubleshooting</a></p>
<ul>
<li><p><a class="reference internal" href="#ensuring-use-of-a-particular-rmw-implementation" id="id7">Ensuring use of a particular RMW implementation</a></p></li>
<li><p><a class="reference internal" href="#rti-connext-on-osx-failure-due-to-insufficient-shared-memory-kernel-settings" id="id8">RTI Connext on OSX: Failure due to insufficient shared memory kernel settings</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>This page explains the default RMW implementation and how to specify an alternative.</p>
<section id="prerequisites">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<p>You should have already read the <a class="reference internal" href="../Concepts/About-Different-Middleware-Vendors.html"><span class="doc">DDS and ROS middleware implementations page</span></a>.</p>
</section>
<section id="multiple-rmw-implementations">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Multiple RMW implementations</a><a class="headerlink" href="#multiple-rmw-implementations" title="Link to this heading"></a></h2>
<p>The ROS 2 binary releases for currently active distros have built-in support for several RMW implementations out of the box (Fast RTPS, RTI Connext Pro, ADLINK OpenSplice and Eclipse Cyclone DDS).
The default is Fast RTPS, which works without any additional installation steps, because we distribute it with our binary packages.
Cyclone DDS is also distributed with binary packages since Eloquent.</p>
<p>Others like OpenSplice or Connext can be enabled by <a class="reference internal" href="../Installation/DDS-Implementations.html"><span class="doc">installing additional packages</span></a>, but without having to rebuild anything or replace any existing packages.</p>
<p>A ROS 2 workspace that has been built from source may build and install multiple RMW implementations simultaneously.
While the core ROS 2 code is being compiled, any RMW implementation that is found will be built if the relevant DDS/RTPS implementation has been installed properly and the relevant environment variables have been configured.
For example, if the code for the <a class="reference external" href="https://github.com/ros2/rmw_connext/tree/dashing/rmw_connext_cpp">RMW package for RTI Connext</a> is in the workspace, it will be built if an installation of RTI's Connext Pro can also be found.</p>
<p>For many cases you will find that nodes using different RMW implementations are able to communicate, however this is not true under all circumstances.
Here is a list of inter-vendor communication configurations that are not supported:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Fast-DDS &lt;-&gt; Connext</dt><dd><ul>
<li><p>does not support communication over pub/sub</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WString</span></code> published by Fast-DDS can't be received correctly by Connext on macOS</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>OpenSplice &lt;-&gt; OpenSplice</dt><dd><ul>
<li><p>does not support <code class="docutils literal notranslate"><span class="pre">WString</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WString</span></code> is mapped to <code class="docutils literal notranslate"><span class="pre">String</span></code> which has a different wire representation</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Connext &lt;-&gt; CycloneDDS</dt><dd><ul>
<li><p>does not support pub/sub communication for <code class="docutils literal notranslate"><span class="pre">WString</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Connext Dynamic &lt;-&gt; Connext Dynamic</dt><dd><ul>
<li><p>does not support C services</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="default-rmw-implementation">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Default RMW implementation</a><a class="headerlink" href="#default-rmw-implementation" title="Link to this heading"></a></h2>
<p>If a ROS 2 workspace has multiple RMW implementations, the default RMW implementation is currently selected as Fast RTPS if it's available.
If the Fast RTPS RMW implementation is not installed, the RMW implementation with the first RMW implementation identifier in alphabetical order will be used.
The implementation identifier is the name of the ROS package that provides the RMW implementation, e.g. <code class="docutils literal notranslate"><span class="pre">rmw_fastrtps_cpp</span></code>.
For example, if both <code class="docutils literal notranslate"><span class="pre">rmw_opensplice_cpp</span></code> and <code class="docutils literal notranslate"><span class="pre">rmw_connext_cpp</span></code> ROS packages are installed, <code class="docutils literal notranslate"><span class="pre">rmw_connext_cpp</span></code> would be the default.
If <code class="docutils literal notranslate"><span class="pre">rmw_fastrtps_cpp</span></code> is ever installed, it would be the default.
See below for how to specify which RMW implementation is to be used when running the ROS 2 examples.</p>
</section>
<section id="specifying-rmw-implementations">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Specifying RMW implementations</a><a class="headerlink" href="#specifying-rmw-implementations" title="Link to this heading"></a></h2>
<p>To have multiple RMW implementations available for use you must have installed our binaries and any additional dependencies for specific RMW implementations, or built ROS 2 from source with multiple RMW implementations in the workspace (they are included by default and their dependencies are met). See <a class="reference internal" href="../Installation/DDS-Implementations.html"><span class="doc">Install DDS implementations</span></a>.</p>
<hr class="docutils" />
<p>Starting in Beta 2 and above both C++ and Python nodes support an environment variable <code class="docutils literal notranslate"><span class="pre">RMW_IMPLEMENTATION</span></code>.
To choose a different RMW implemenation you can set the environment variable <code class="docutils literal notranslate"><span class="pre">RMW_IMPLEMENTATION</span></code> to a specific implementation identifier.</p>
<p>To run the talker demo using the C++ and listener using Python with the RMW implementation for Connext:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-0-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-0-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-0-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-0-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_connext_cpp<span class="w"> </span>ros2<span class="w"> </span>run<span class="w"> </span>demo_nodes_cpp<span class="w"> </span>talker

<span class="c1"># Run in another terminal</span>
<span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_connext_cpp<span class="w"> </span>ros2<span class="w"> </span>run<span class="w"> </span>demo_nodes_py<span class="w"> </span>listener
</pre></div>
</div>
</div><div aria-labelledby="tab-0-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_connext_cpp<span class="w"> </span>ros2<span class="w"> </span>run<span class="w"> </span>demo_nodes_cpp<span class="w"> </span>talker

<span class="c1"># Run in another terminal</span>
<span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_connext_cpp<span class="w"> </span>ros2<span class="w"> </span>run<span class="w"> </span>demo_nodes_py<span class="w"> </span>listener
</pre></div>
</div>
</div><div aria-labelledby="tab-0-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">RMW_IMPLEMENTATION</span><span class="p">=</span>rmw_connext_cpp
ros2 run demo_nodes_cpp talker

<span class="c1">REM run in another terminal</span>
<span class="k">set</span> <span class="nv">RMW_IMPLEMENTATION</span><span class="p">=</span>rmw_connext_cpp
ros2 run demo_nodes_py listener
</pre></div>
</div>
</div></div>
</section>
<section id="adding-rmw-implementations-to-your-workspace">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Adding RMW implementations to your workspace</a><a class="headerlink" href="#adding-rmw-implementations-to-your-workspace" title="Link to this heading"></a></h2>
<p>Suppose that you have built your ROS 2 workspace with only Fast RTPS installed and therefore only the Fast RTPS RMW implementation built.
The last time your workspace was built, any other RMW implementation packages, <code class="docutils literal notranslate"><span class="pre">rmw_connext_cpp</span></code> for example, were probably unable to find installations of the relevant DDS implementations.
If you then install an additional DDS implementation, Connext for example, you will need to re-trigger the check for a Connext installation that occurs when the Connext RMW implementation is being built.
You can do this by specifying the <code class="docutils literal notranslate"><span class="pre">--cmake-force-configure</span></code> flag on your next workspace build, and you should see that the RMW implementation package then gets built for the newly installed DDS implementation.</p>
<p>It is possible to run into a problem when &quot;rebuilding&quot; the workspace with an additional RMW implementation using the <code class="docutils literal notranslate"><span class="pre">--cmake-force-configure</span></code> option where the build complains about the default RMW implementation changing.
To resolve this, you can either set the default implementation to what is was before with the <code class="docutils literal notranslate"><span class="pre">RMW_IMPLEMENTATION</span></code> CMake argument or you can delete the build folder for packages that complain and continue the build with <code class="docutils literal notranslate"><span class="pre">--start-with</span> <span class="pre">&lt;package</span> <span class="pre">name&gt;</span></code>.</p>
</section>
<section id="troubleshooting">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="ensuring-use-of-a-particular-rmw-implementation">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Ensuring use of a particular RMW implementation</a><a class="headerlink" href="#ensuring-use-of-a-particular-rmw-implementation" title="Link to this heading"></a></h3>
<p>If the <code class="docutils literal notranslate"><span class="pre">RMW_IMPLEMENTATION</span></code> environment variable is set to an RMW implementation for which support is not installed, you will see an error message similar to the following if you have only one implementation installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Expected<span class="w"> </span>RMW<span class="w"> </span>implementation<span class="w"> </span>identifier<span class="w"> </span>of<span class="w"> </span><span class="s1">&#39;rmw_connext_cpp&#39;</span><span class="w"> </span>but<span class="w"> </span>instead<span class="w"> </span>found<span class="w"> </span><span class="s1">&#39;rmw_fastrtps_cpp&#39;</span>,<span class="w"> </span>exiting<span class="w"> </span>with<span class="w"> </span><span class="m">102</span>.
</pre></div>
</div>
<p>If you have support for multiple RMW implementations installed and you request use of one that is not installed, you will see something similar to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Error<span class="w"> </span>getting<span class="w"> </span>RMW<span class="w"> </span>implementation<span class="w"> </span>identifier<span class="w"> </span>/<span class="w"> </span>RMW<span class="w"> </span>implementation<span class="w"> </span>not<span class="w"> </span>installed<span class="w"> </span><span class="o">(</span>expected<span class="w"> </span>identifier<span class="w"> </span>of<span class="w"> </span><span class="s1">&#39;rmw_connext_cpp&#39;</span><span class="o">)</span>,<span class="w"> </span>exiting<span class="w"> </span>with<span class="w"> </span><span class="m">1</span>.
</pre></div>
</div>
<p>If this occurs, double check that your ROS 2 installation includes support for the RMW implementation that you have specified in the <code class="docutils literal notranslate"><span class="pre">RMW_IMPLEMENTATION</span></code> environment variable.</p>
<p>If you want to switch between RMW implementations, verify that the ROS 2 daemon process is not running with the previous RMW implementation to avoid any issues between nodes and command line tools such as <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">node</span></code>.
For example, if you run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_connext_cpp<span class="w"> </span>ros2<span class="w"> </span>run<span class="w"> </span>demo_nodes_cpp<span class="w"> </span>talker
</pre></div>
</div>
<p>and</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>node<span class="w"> </span>list
</pre></div>
</div>
<p>it will generate a daemon with a Fast RTPS implementation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">21318</span><span class="w"> </span><span class="m">22</span>.0<span class="w">  </span><span class="m">0</span>.6<span class="w"> </span><span class="m">535896</span><span class="w"> </span><span class="m">55044</span><span class="w"> </span>pts/8<span class="w">    </span>Sl<span class="w">   </span><span class="m">16</span>:14<span class="w">   </span><span class="m">0</span>:00<span class="w"> </span>/usr/bin/python3<span class="w"> </span>/opt/ros/dashing/bin/_ros2_daemon<span class="w"> </span>--rmw-implementation<span class="w"> </span>rmw_fastrtps_cpp<span class="w"> </span>--ros-domain-id<span class="w"> </span><span class="m">22</span>
</pre></div>
</div>
<p>Even if you run the command line tool again with the correct RMW implementation, the daemon's RMW implementation will not change and the ROS 2 command line tools will fail.</p>
<p>To solve this, simply stop the daemon process:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>daemon<span class="w"> </span>stop
</pre></div>
</div>
<p>and rerun the ROS 2 command line tool with the correct RMW implementation.</p>
</section>
<section id="rti-connext-on-osx-failure-due-to-insufficient-shared-memory-kernel-settings">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">RTI Connext on OSX: Failure due to insufficient shared memory kernel settings</a><a class="headerlink" href="#rti-connext-on-osx-failure-due-to-insufficient-shared-memory-kernel-settings" title="Link to this heading"></a></h3>
<p>If you receive an error message similar to below when running RTI Connext on OSX:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[D0062|ENABLE]DDS_DomainParticipantPresentation_reserve_participant_index_entryports:!enable reserve participant index</span>
<span class="go">[D0062|ENABLE]DDS_DomainParticipant_reserve_participant_index_entryports:Unusable shared memory transport. For a more in-   depth explanation of the possible problem and solution, please visit https://community.rti.com/kb/osx510.</span>
</pre></div>
</div>
<p>This error is caused by an insufficient number or size of shared memory segments allowed by the operating system. As a result, the <code class="docutils literal notranslate"><span class="pre">DomainParticipant</span></code> is unable to allocate enough resources and calculate its participant index which causes the error.</p>
<p>You can increase the shared memory resources of your machine either temporarily or permanently.</p>
<p>To increase the settings temporarily, you can run the following commands as user root:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">/usr/sbin/sysctl -w kern.sysv.shmmax=419430400</span>
<span class="go">/usr/sbin/sysctl -w kern.sysv.shmmin=1</span>
<span class="go">/usr/sbin/sysctl -w kern.sysv.shmmni=128</span>
<span class="go">/usr/sbin/sysctl -w kern.sysv.shmseg=1024</span>
<span class="go">/usr/sbin/sysctl -w kern.sysv.shmall=262144</span>
</pre></div>
</div>
<p>To increase the settings permanently, you will need to edit or create the file <code class="docutils literal notranslate"><span class="pre">/etc/sysctl.conf</span></code>. Creating or editing this file will require root permissions. Either add to your existing <code class="docutils literal notranslate"><span class="pre">etc/sysctl.conf</span></code> file or create <code class="docutils literal notranslate"><span class="pre">/etc/sysctl.conf</span></code> with the following lines:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">kern.sysv.shmmax=419430400</span>
<span class="go">kern.sysv.shmmin=1</span>
<span class="go">kern.sysv.shmmni=128</span>
<span class="go">kern.sysv.shmseg=1024</span>
<span class="go">kern.sysv.shmall=262144</span>
</pre></div>
</div>
<p>You will need to reboot the machine after modifying this file to have the changes take effect.</p>
<p>This solution is edited from the RTI Connext community forum.
See the <a class="reference external" href="https://community.rti.com/kb/osx510">original post</a> for more detailed explanation.</p>
</section>
</section>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="Sync-Vs-Async.html" class="btn btn-neutral float-left" title="Synchronous vs. asynchronous service clients" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="catment.html" class="btn btn-neutral float-right" title="On the mixing of ament and catkin (catment)" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2018, Open Robotics。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EVD5Z6G6NH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>